version: 1

# Pack-owned "special" API routes (schema-visible).
#
# These are endpoints that are NOT the schema-generated CRUD routes derived from `entities.*.api.resource`.
# They must be explicitly declared here so `hit schema validate` can enforce consistency and prevent drift.
api:
  routes:
    - path: /api/table-views/[id]/use
      methods: [PATCH]
      handler: table-views-use
      description: "Mark a view as used (update lastUsedAt)"
    - path: /api/table-views/[id]/shares
      methods: [GET, POST, DELETE]
      handler: table-views-shares
      description: "List, add, or remove share entries for a view"
    - path: /api/table-data/group-meta
      methods: [POST]
      handler: table-data-group-meta
      description: "Compute group order + counts for a tableId + view grouping"
    - path: /api/table-data/query
      methods: [POST]
      handler: table-data-query
      description: "Canonical table data query (viewId/search/grouping)"
